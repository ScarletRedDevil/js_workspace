<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>캐논</title>
</head>
<script src="./Cannon.js"></script>
<script>
    let cannon;
    let bulletArray=[];//배열로 만들면 []로 만들어도 초기값이 없는 게 아니라 사이즈가 0인것
    // undefined와는 다름.

    function init(){
        cannon.style.position="absolute"; //document.body를 기준으로 함.(cannon이 바디에 정의됨)
        cannon.style.top = 200+"px"
        cannon.style.left=0+"px"
    }
    // 거푸집으로부터 총알 인스턴스 생성하기
    function fire(){
        let x = parseInt(cannon.style.left)
        let y = parseInt(cannon.style.top)
        
        bullet = new Cannon("../images/cannon/b1.webp",x+100,y+30,40,50,5,-1)

        bulletArray.push(bullet)
    }
    function gameLoop(){
        for(let i = 0;i<bulletArray.length;i++){
            bulletArray[i].move();
        }
    }

    addEventListener("load", function(){
        cannon = document.getElementById("cannon");
        init();

        document.body.addEventListener("keydown", function(e){
            // e는 event 객체임
            console.log("zz",e.keyCode)
            if(e.keyCode==32){
                fire();
            }
        })
        setInterval("gameLoop()",10);
    })

</script>
<body>
    <select name="sel">
        <option value="">포탄 선택</option>
        <option value="b3.webp">미사일</option>
        <option value="b1.webp">포탄</option>
        <option value="b2.webp">로켓</option>
    </select>
    <p></p>
    <img src="../images/cannon/cannon.webp" id="cannon">
</body>
</html>